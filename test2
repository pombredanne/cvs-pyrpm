#!/usr/bin/python

import sys
import pyrpmlib
from rpmconstants import *

for i in sys.argv[1:]:
#    rpmio = pyrpmlib.RpmFile(i, ntags=[RPMTAG_CHANGELOGTEXT, RPMTAG_CHANGELOGNAME, RPMTAG_CHANGELOGTIME])
    rpmio = pyrpmlib.RpmFile(i, tags=[RPMTAG_NAME, RPMTAG_VERSION, RPMTAG_RELEASE, RPMTAG_EPOCH, RPMTAG_SIZE, RPMTAG_ARCH, RPMTAG_PROVIDENAME, RPMTAG_REQUIREFLAGS, RPMTAG_REQUIRENAME, RPMTAG_REQUIREVERSION, RPMTAG_PROVIDEFLAGS, RPMTAG_PROVIDEVERSION, RPMTAG_DIRINDEXES, RPMTAG_BASENAMES, RPMTAG_DIRNAMES, RPMTAG_PREIN, RPMTAG_PREINPROG, RPMTAG_POSTIN, RPMTAG_POSTINPROG, RPMTAG_PREUN, RPMTAG_PREUNPROG, RPMTAG_POSTUN, RPMTAG_POSTUNPROG, RPMTAG_VERIFYSCRIPT, RPMTAG_VERIFYSCRIPTPROG, RPMTAG_FILEMODES, RPMTAG_FILEMTIMES, RPMTAG_FILEUSERNAME, RPMTAG_FILEGROUPNAME], keepdata=1, payload=1)
#    rpmio = pyrpmlib.RpmFile(i, tags=[RPMTAG_NAME, RPMTAG_VERSION, RPMTAG_RELEASE, RPMTAG_EPOCH, RPMTAG_SUMMARY, RPMTAG_DESCRIPTION, RPMTAG_SIZE, RPMTAG_DISTRIBUTION, RPMTAG_ARCH, RPMTAG_PREIN, RPMTAG_POSTIN, RPMTAG_PREUN, RPMTAG_POSTUN, RPMTAG_FILESIZES, RPMTAG_FILESTATES, RPMTAG_FILEMODES, RPMTAG_FILEUIDS, RPMTAG_FILEGIDS, RPMTAG_FILERDEVS, RPMTAG_FILEMTIMES, RPMTAG_FILEMD5S, RPMTAG_FILELINKTOS, RPMTAG_FILEFLAGS, RPMTAG_ROOT, RPMTAG_FILEUSERNAME, RPMTAG_FILEGROUPNAME, RPMTAG_PROVIDENAME, RPMTAG_REQUIREFLAGS, RPMTAG_REQUIRENAME, RPMTAG_REQUIREVERSION, RPMTAG_CONFLICTFLAGS, RPMTAG_CONFLICTNAME, RPMTAG_CONFLICTVERSION, RPMTAG_FILEDEVICES, RPMTAG_FILEINODES, RPMTAG_FILELANGS, RPMTAG_PROVIDEFLAGS, RPMTAG_PROVIDEVERSION, RPMTAG_OBSOLETEFLAGS, RPMTAG_OBSOLETEVERSION, RPMTAG_DIRINDEXES, RPMTAG_BASENAMES, RPMTAG_DIRNAMES, RPMTAG_PAYLOADFORMAT, RPMTAG_PAYLOADCOMPRESSOR, RPMTAG_PAYLOADFLAGS])
#    rpmio = pyrpmlib.RpmFile(i)
    rpm = pyrpmlib.RpmPackage()
    rpm.read(rpmio)
    rpm.install("/mnt/build/pyrpm-fc3-i386/")
#    print rpm["preinprog"]
#    print rpm["prein"]
#    print "------------------------------------------------------------------"
#    print rpm["preunprog"]
#    print rpm["preun"]
#    print "------------------------------------------------------------------"
#    print rpm["postinprog"]
#    print rpm["postin"]
#    print "------------------------------------------------------------------"
#    print rpm["postunprog"]
#    print rpm["postun"]
